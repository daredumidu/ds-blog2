<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Policy Tool</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self';">
    
    <!-- External Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // Ensure jsPDF is available globally
        window.jsPDF = window.jspdf?.jsPDF || window.jsPDF;
    </script>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/design.css">
    <link rel="stylesheet" href="css/components.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="top-nav">
        <div class="nav-content">
            <div class="nav-logo">
                <img src="assets/icons/g20-logo.png" alt="G20 Logo" class="g20-logo-img">
            </div>
            
            <div class="nav-menu">
                <div class="nav-links">
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link">Home <span class="dropdown-arrow">â–¼</span></a>
                    </div>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link">Case Studies <span class="dropdown-arrow">â–¼</span></a>
                    </div>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link">Experts <span class="dropdown-arrow">â–¼</span></a>
                    </div>
                </div>
                
                <div class="nav-tools">
                    <div class="language-selector">
                        <select class="language-select">
                            <option value="en">English</option>
                        </select>
                    </div>
                    <button class="search-btn" aria-label="Search">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Header Banner -->
    <div class="header-banner">
        <div class="banner-content">
            <div class="banner-title">
                <!-- Title content can be added here -->
            </div>
        </div>
    </div>

<!-- Update the container section in your HTML -->
<div class="container">
    <!-- Left Panel Container (includes sidebar + main content) -->
    <div class="left-panel-container">
        <div class="left-panel">
            <!-- Vertical Sidebar for policy areas -->
            <div class="sidebar">
            <div class="sidebar-how-to-use">
                </button>
            </div>
                <div class="sidebar-header">
                    <div class="sidebar-subtitle">Select a Policy Area</div>
                </div>
                
                <div class="sidebar-menu" id="sidebarMenu">
                    <!-- Policy area items with phase dropdowns will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Main content area -->
            <div class="main-content">
                <!-- Search & Filter Section -->
                <div class="search-filter-section" id="searchFilterSection">
                    <div class="search-filter-row">
                        <div class="search-container">
                            <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            <input type="text" class="search-input" id="policySearchInput" placeholder="Search policy initiatives...">
                        </div>
                        <div class="keyword-filters-container">
                            <select class="keyword-dropdown" id="keywordDropdown">
                                <option value="">Filter by keyword...</option>
                            </select>
                            <button class="clear-filters-btn" id="clearFiltersBtn" style="display: none;">Clear Filters</button>
                            <div class="active-keywords-inline" style="position: relative;">
                                <div class="visible-keywords" id="visibleKeywords"></div>
                                <div class="keywords-overflow" id="keywordsOverflow" style="display: none;">+2 more</div>
                                <div class="keywords-tooltip" id="keywordsTooltip">
                                    <div class="tooltip-keywords" id="tooltipKeywords"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="phases-section hidden" id="phasesSection">
                    
                    <div class="phases-header">
                        <span class="phases-title">Select Phase</span>
                        <div class="phases-container" id="phaseGrid">
                            <!-- Phase buttons will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                <!-- Two-Column Policy Layout -->
                <div class="section hidden" id="policySection">
                    <div class="policy-container" id="policyContainer">
                        <!-- Left Column: Policy List -->
                        <div class="policy-list-column">
                            <div class="policy-list-column-content">
                                <div class="policy-list-header" id="policyListTitle">
                                    <!-- Select a dimension and phase -->
                                </div>
                                <div class="policy-list" id="policyList">
                                    <div class="empty-state">


                                        <div class="empty-state-icon">ðŸ“‹</div>
                                        <div class="empty-state-text">
                                        <h3 style="font-size: 0.875rem; font-weight: 600; margin-bottom: 0.1rem; margin-top:-0.15rem;">How to use</h3>
                                        <p style="font-size: 0.8rem; color: var(--color-gray-600); line-height: 1.5; margin-bottom: 0.3rem;">
                                            Search for policy initiatives or browse by policy area and phase 
                                            <br> 
                                            Select policy initiatives to read more <br> Export your policy plan  
                                            <br>
                                            Choose a policy area and phase to view available initiatives
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right Column: Initiative Details -->
                        <div class="policy-details-column" id="policyDetailsColumn">
                            <div class="details-header">
                                <button class="policy-list-toggle" id="policyListToggle" aria-label="Back to policy list">
                                    <svg class="policy-list-toggle-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                    </svg>
                                    Back
                                </button>
                                <div class="details-title">Policy Initiative Details</div>
                                <button class="btn-select hidden" id="selectPolicyBtn" aria-describedby="select-help">
                                    <svg class="add-icon" fill="none" stroke="white" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                    </svg>
                                    Add to Plan
                                </button>
                            </div>
                            <div class="details-content" id="policyDetailsContent">
                                <div class="empty-state">
                                    <div class="empty-state-icon">ðŸ“„</div>
                                    <div class="empty-state-text">
                                        Select a policy initiative from the list to view its details
                                    </div>
                                </div>
                            </div>
                            <span id="select-help" class="sr-only">Select this policy initiative to add it to your implementation plan</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Selected Policy Initiatives Section - Now separate below left panel -->
    <div class="selected-policies-container-wrapper">
        <div class="section hidden" id="selectedPoliciesSection">
            <h2>Selected Policy Initiatives</h2>
            <div class="selected-policies-container">
                <div class="selected-policies-header">
                    <span class="selected-count" id="selectedPoliciesCount">0 policy initiatives selected</span>
                    <button class="clear-all-btn" id="clearAllBtn">Clear All</button>
                </div>
                <div class="selected-policies-list" id="selectedPoliciesList">
                    <div class="empty-state">
                        <div class="empty-state-icon">ðŸ“‹</div>
                        <div class="empty-state-text">
                        <h3 style="font-size: 0.875rem; font-weight: 600; margin-bottom: 0.1rem; margin-top:-0.15rem;">How to use</h3>
                        <p style="font-size: 0.8rem; color: var(--color-gray-600); line-height: 1.5; margin-bottom: 0.3rem;">
                            Search for policy initiatives or browse by policy area and phase 
                            <br> 
                            Select policy initiatives to read more <br> Export your policy plan  
                            <br>
                            No policy initiatives selected yet. Select initiatives to see them here</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Right Panel -->
    <div class="right-panel">
        <!-- Instructions with integrated export -->

        
        <!-- Matrix with Bars - AXES SWITCHED -->
        <div class="selection-matrix-container">
            <div class="matrix-subtitle"> <h3 style="font-size: 0.875rem; font-weight: 600; margin-bottom: 0.1rem; margin-top:-0.15rem;">Policy Plan Dashboard</h3>  Track your selected policy initiatives across areas and phases</div>
            
            <!-- Matrix Legend -->
            <div class="matrix-legend">
                <div class="legend-item">
                    <div class="legend-bar selected"></div>
                    <span>Selected</span>
                </div>
                <div class="legend-item">
                    <div class="legend-bar related"></div>
                    <span>Related</span>
                </div>
                <!-- <div class="legend-item">
                    <div class="legend-bar viewing"></div>
                    <span>Viewing</span>
                </div> -->
            </div>
            
            <!-- Updated Matrix Section with Switched Axes -->
            <div class="selection-coordinate-system">
                <div class="coordinate-grid" style="position: relative;">
                    <!-- Y-axis now shows DIMENSIONS (what used to be X-axis) -->
                    <div class="y-axis-labels">
                        <div class="y-axis-label" data-full-text="Research & Education">Research</div>
                        <div class="y-axis-label" data-full-text="Economy & Innovation">Econ</div>
                        <div class="y-axis-label" data-full-text="Sustainability & Society">Sustain</div>
                        <div class="y-axis-label" data-full-text="Legislation & Policy">Legal</div>
                        <div class="y-axis-label" data-full-text="Enabling Infrastructure">Infra</div>
                    </div>
                    
                    <div class="main-grid" id="selectionGrid"></div>
                    
                    <div></div> <!-- Empty cell for spacing -->
                    
                    <!-- X-axis now shows PHASES (what used to be Y-axis) -->
                    <div class="x-axis-labels">
                        <div class="x-axis-label" data-full-text="Analysis">Analysis</div>
                        <div class="x-axis-label" data-full-text="Design">Design</div>
                        <div class="x-axis-label" data-full-text="Implementation">Impl</div>
                        <div class="x-axis-label" data-full-text="Monitoring & Evaluation">M&E</div>
                    </div>
                </div>
            </div>
            <br>
            <button class="export-btn export-pdf" onclick="exportToPDF()" style="width: 100%; justify-content: center;">
                Export Your Policy Plan as a PDF
            </button>
        </div>


        <!-- Expert Profiles -->
        <div class="experts-section" id="expertsSection">
            <div class="experts-title">Relevant Experts</div>
            <div class="experts-grid" id="expertsGrid">
                <div class="loading-message">Loading experts...</div>
            </div>
        </div>
    </div>
</div>

    <!-- JavaScript Modules -->
    <script type="module" src="js/main.js"></script>
</body>
</html>